{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="col-md-6">
        <h3>История переводов</h3>
        <ul class="nav nav-tabs" id="credit-hist-tab" role="tablist">
            <li class="nav-item">
                <a class="nav-item nav-link active" id="users-tab" role="tab" aria-controls="masters" data-toggle="tab" href="#users">Заёмщики</a>
            </li>
            <li class="nav-item">
                <a class="nav-item nav-link" id="affected-tab" role="tab" aria-controls="slaves" data-toggle="tab" href="#affected">Кредиторы</a>
            </li>
        </ul>

        <div class="tab-content" id="credit-tab">
            <div id="users" class="tab-pane fade active show" role="tabpanel"  aria-labelledby="masters-tab">
                <div class="form-group">
                    <div id="users-list" class="list-group">
                        {% if user_history %}
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th scope="col">Пользователь</th>
                                        <th scope="col">Было</th>
                                        <th scope="col">Стало</th>
                                    </tr>
                                </thead>
                                <tbody class="sortable">
                                {% for edition in user_history %}
                                    <tr>
                                        <td>
                                            <h4>{{edition.affected_user.fullname}}</h4>
                                        </td>
                                        <td>
                                            <h4>{{edition.old_value}}</h4>
                                        </td>
                                        <td>
                                            <h4>{{edition.new_value}}</h4>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        {% else %}
                            <li class="list-group-item">
                                <h4>Не найдено</h4>
                            </li>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div id="affected" class="tab-pane fade" role="tabpanel"  aria-labelledby="slaves-tab">
                <div class="form-group">
                    <div id="affected-list" class="list-group d-flex">
                        {% if affected_history %}
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th scope="col">Пользователь</th>
                                        <th scope="col">Было</th>
                                        <th scope="col">Стало</th>
                                    </tr>
                                </thead>
                                <tbody class="sortable">
                                {% for edition in affected_history %}
                                    <tr>
                                        <td>
                                            <h4>{{edition.user.fullname}}</h4>
                                        </td>
                                        <td>
                                            <h4>{{edition.old_value}}</h4>
                                        </td>
                                        <td>
                                            <h4>{{edition.new_value}}</h4>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        {% else %}
                            <li class="list-group-item">
                                <h4>Не найдено</h4>
                            </li>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}