{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="col-md-6">
        <h3>История переводов</h3>
        <ul class="nav nav-tabs" id="credit-hist-tab" role="tablist">
            <li class="nav-item">
                <a class="nav-item nav-link active" id="users-tab" role="tab" aria-controls="masters" data-toggle="tab" href="#users">Заёмщики</a>
            </li>
            <li class="nav-item">
                <a class="nav-item nav-link" id="affected-tab" role="tab" aria-controls="slaves" data-toggle="tab" href="#affected">Кредиторы</a>
            </li>
        </ul>

        <div class="tab-content" id="credit-tab">
            <div id="users" class="tab-pane fade active show" role="tabpanel"  aria-labelledby="masters-tab">
                <div class="form-group">
                    <div id="users-list" class="list-group">
                        {% if user_history %}
                            <li class="list-group-item">
                                <div class="row d-flex align-items-center">
                                    <div class="col-6"><b>Пользователь</b></div>
                                    <div class="col-3"><b>Было</b></div>
                                    <div class="col-3"><b>Стало</b></div>
                                </div>
                            </li>
                            <li class="list-group-item">
                                {% for edition in user_history %}
                                    <div class="row d-flex align-items-center">
                                        <div class="col-6 text-truncate">{{edition.affected_user.fullname}}</div>
                                        <div class="col-3 text-center">{{edition.old_value}}</div>
                                        <div class="col-3 text-center">{{edition.new_value}}</div>
                                    </div>
                                {% endfor %}
                            </li>
                        {% else %}
                            <li class="list-group-item">
                                <h4>Не найдено</h4>
                            </li>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div id="affected" class="tab-pane fade" role="tabpanel"  aria-labelledby="slaves-tab">
                <div class="form-group">
                    <div id="affected-list" class="list-group d-flex">
                        {% if affected_history %}
                            <li class="list-group-item">
                                <div class="row d-flex align-items-center">
                                    <div class="col-6"><b>Пользователь</b></div>
                                    <div class="col-3"><b>Было</b></div>
                                    <div class="col-3"><b>Стало</b></div>
                                </div>
                            </li>
                            <li class="list-group-item">
                                {% for edition in affected_history %}
                                    <div class="row d-flex align-items-center">
                                        <div class="col-6 text-truncate">{{edition.user.fullname}}</div>
                                        <div class="col-3 text-center">{{edition.old_value}}</div>
                                        <div class="col-3 text-center">{{edition.new_value}}</div>
                                    </div>
                                {% endfor %}
                            </li>
                        {% else %}
                            <li class="list-group-item">
                                <h4>Не найдено</h4>
                            </li>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}